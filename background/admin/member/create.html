
<script src="http://project.chenfeng.co/taikooli/public/assets/js/ajaxfileupload.min.js"></script>

<style>
.xiangQing{ font-size: 16px;font-weight: 700; margin: 20px 0px 20px 20px;}
</style>

<form accept-charset="utf-8" class="form-horizontal" id="ajaxform" autocomplete="off" method="POST" action="http://project.chenfeng.co/taikooli/public/admin/member/create">
        <div class="xiangQing">会员信息：</div>
    <div class="form-group required"><label for="fmbrname" class="control-label col-lg-2 col-sm-4">姓名<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="fmbrname" type="text" name="fmbrname"></div></div>
    <div class="form-group required"><label for="fmobilephone" class="control-label col-lg-2 col-sm-4">电话<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="fmobilephone" type="tel" name="fmobilephone"></div></div>
    <div class="form-group required"><label for="fmbrbirth" class="control-label col-lg-2 col-sm-4">出生年月<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="fmbrbirth" type="date" name="fmbrbirth"></div></div>
    <div class="form-group"><label for="femail" class="control-label col-lg-2 col-sm-4">邮箱</label><div class="col-lg-10 col-sm-8"><input class="form-control" id="femail" type="text" name="femail"></div></div>
    <div class="form-group required"><label for="faddress" class="control-label col-lg-2 col-sm-4">居住地址<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="faddress" type="text" name="faddress"></div></div>
    <div class="form-group required"><label for="fmbrsex" class="control-label col-lg-2 col-sm-4">性别<sup>*</sup></label><div class="col-lg-10 col-sm-8"><select class="form-control" required="required" id="fmbrsex" name="fmbrsex"><option value="男">男</option><option value="女">女</option></select></div></div>
    <div class="form-group required"><label for="fwedlock" class="control-label col-lg-2 col-sm-4">婚姻状况<sup>*</sup></label><div class="col-lg-10 col-sm-8"><select class="form-control" required="required" id="fwedlock" name="fwedlock"><option value="未婚">未婚</option><option value="已婚">已婚</option></select></div></div>
    <div class="form-group"><label for="fidcard" class="control-label col-lg-2 col-sm-4">身份证号</label><div class="col-lg-10 col-sm-8"><input class="form-control" id="fidcard" type="text" name="fidcard"></div></div>

    <div class="form-group"><div class="col-lg-offset-2 col-sm-offset-4 col-lg-10 col-sm-8"><button class="btn btn-success btn-lg btn-block" type="submit"><span class="glyphicon glyphicon-ok-sign"></span> 保存</button></div></div>
<input class="form-control" type="hidden" name="_token" value="MsoqhDyCts4oSbQIVgprh44nbOZaZjNG5ZPmW7mC"></form>

<script type="text/javascript">
    $(document).ready(function() {
        //提交数据
        var tableId = 'member';
        var frm     = $('#ajaxform');
        frm.submit(function () {
            var phone = $("#fmobilephone").val();
            var $phe=/^(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/;
                if(!($phe.test(phone))){
                    layer.msg('请输入正确的手机号码',{
                              time: 2000, //2s后自动关闭
                            });
                    return false;
                }
            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),                          
                cache: false,
                dataType: 'json',
                beforeSend: function() { 
                    $(".validator-error").remove();
                    $(".has-error").removeClass("has-error");
                },
                success: function(data) {
                    if(data.status == 0){
                        $.scojs_message(data.message, $.scojs_message.TYPE_ERROR);
                        if(data.hasOwnProperty('errors')){
                            var arr = data.errors;
                            $.each(arr, function(index, value){
                                if (value.length != 0){
                                    $("#"+index).parent().parent().addClass('has-error');
                                    $("#"+index).parent().after('<div class="col-md-offset-2 col-md-12 validator-error"><label class="control-label" for="'+index+'">'+ value +'</label></div>');
                                }
                            });
                        }
                    }else {
                        BootstrapDialog.closeAll();
                        $('#'+tableId).DataTable().ajax.reload();
                        $.scojs_message(data.message, $.scojs_message.TYPE_OK);
                    }
                },
                error: function(xhr, textStatus, thrownError) {
                    alert('Something went to wrong.Please Try again later...');
                }
            });
            return false;
        });
    });
</script>