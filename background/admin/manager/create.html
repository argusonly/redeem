
<script src="http://project.chenfeng.co/taikooli/public/assets/js/ajaxfileupload.min.js"></script>


<form accept-charset="utf-8" class="form-horizontal" id="ajaxform" autocomplete="off" method="POST" action="http://project.chenfeng.co/taikooli/public/admin/manager/create">
        
    <div class="form-group required"><label for="username" class="control-label col-lg-2 col-sm-4">用户名<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="username" type="text" name="username"></div></div>
        <div class="form-group required"><label for="password" class="control-label col-lg-2 col-sm-4">密码<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="password" type="text" name="password"></div></div>
        <div class="form-group required"><label for="email" class="control-label col-lg-2 col-sm-4">邮箱<sup>*</sup></label><div class="col-lg-10 col-sm-8"><input class="form-control" required="required" id="email" type="text" name="email"></div></div>
    <div class="form-group"><label for="area_id" class="control-label col-lg-2 col-sm-4">区域</label><div class="col-lg-10 col-sm-8"><select class="form-control" id="area_id" name="area_id"><option value="1">南区</option><option value="2">北区</option></select></div></div>
    
    <div class="form-group"><div class="col-lg-offset-2 col-sm-offset-4 col-lg-10 col-sm-8"><button class="btn btn-success btn-lg btn-block" type="submit"><span class="glyphicon glyphicon-ok-sign"></span> 保存</button></div></div>
<input class="form-control" type="hidden" name="_token" value="b2CNOcD9yj0XsdbLzVrB37RtQWTWSeCc9qpoTtmI"></form>

<script type="text/javascript">
    $(document).ready(function() {
        //提交数据
        var tableId = 'manager';
        var frm     = $('#ajaxform');
        frm.submit(function () {
            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),                          
                cache: false,
                dataType: 'json',
                beforeSend: function() { 
                    $(".validator-error").remove();
                    $(".has-error").removeClass("has-error");
                },
                success: function(data) {
                    if(data.status == 0){
                        $.scojs_message(data.message, $.scojs_message.TYPE_ERROR);
                        if(data.hasOwnProperty('errors')){
                            var arr = data.errors;
                            $.each(arr, function(index, value){
                                if (value.length != 0){
                                    $("#"+index).parent().parent().addClass('has-error');
                                    $("#"+index).parent().after('<div class="col-md-offset-2 col-md-12 validator-error"><label class="control-label" for="'+index+'">'+ value +'</label></div>');
                                }
                            });
                        }
                    }else {
                        BootstrapDialog.closeAll();
                        $('#'+tableId).DataTable().ajax.reload();
                        $.scojs_message(data.message, $.scojs_message.TYPE_OK);
                    }
                },
                error: function(xhr, textStatus, thrownError) {
                    alert('Something went to wrong.Please Try again later...');
                }
            });
            return false;
        });
    });
</script>